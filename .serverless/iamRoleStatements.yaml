- Effect: Allow
  Action:
    - dynamodb:GetItem
    - dynamodb:PutItem
    - dynamodb:UpdateItem
    - dynamodb:Query
    - dynamodb:Scan
  Resource:
    - arn:aws:dynamodb:${env:AWS_REGION_CODE}:${env:AWS_ACCOUNT_ID}:table/Users
    - arn:aws:dynamodb:${env:AWS_REGION_CODE}:${env:AWS_ACCOUNT_ID}:table/Users/index/*

- Effect: Allow
  Action:
    - dynamodb:GetItem
    - dynamodb:PutItem
    - dynamodb:UpdateItem
    - dynamodb:DeleteItem
    - dynamodb:Query
    - dynamodb:Scan
  Resource:
    - arn:aws:dynamodb:${env:AWS_REGION_CODE}:${env:AWS_ACCOUNT_ID}:table/Projects
    - arn:aws:dynamodb:${env:AWS_REGION_CODE}:${env:AWS_ACCOUNT_ID}:table/Projects/index/*

- Effect: Allow
  Action:
    - dynamodb:GetItem
    - dynamodb:PutItem
    - dynamodb:UpdateItem
    - dynamodb:DeleteItem
    - dynamodb:Query
    - dynamodb:Scan
  Resource:
    - arn:aws:dynamodb:${env:AWS_REGION_CODE}:${env:AWS_ACCOUNT_ID}:table/Ratings
    - arn:aws:dynamodb:${env:AWS_REGION_CODE}:${env:AWS_ACCOUNT_ID}:table/Ratings/index/*

- Effect: Allow
  Action:
    - cognito-idp:AdminConfirmSignUp
    - cognito-idp:GetUser
    - cognito-idp:AdminGetUser
    - cognito-idp:AdminDeleteUser
    - cognito-idp:AdminUpdateUserAttributes
  Resource: arn:aws:cognito-idp:${env:AWS_REGION_CODE}:${env:AWS_ACCOUNT_ID}:userpool/${env:EXPRESS_COGNITO_USER_POOL_ID}

- Effect: Allow
  Action:
    - s3:GetObject
    - s3:PutObject
    - s3:DeleteObject
  Resource: arn:aws:s3:::${env:EXPRESS_S3_TEMP_BUCKET}/*

# permission for HeadObjectCommand
- Effect: Allow
  Action:
    - s3:ListBucket
  Resource: arn:aws:s3:::${env:EXPRESS_S3_TEMP_BUCKET}

- Effect: Allow
  Action:
    - s3:GetObject
    - s3:PutObject
    - s3:PutObjectAcl
  Resource: arn:aws:s3:::${env:EXPRESS_S3_APP_BUCKET}/profile_images/*

- Effect: Allow
  Action:
    - sqs:SendMessage
  Resource:
    - arn:aws:sqs:${env:AWS_REGION_CODE}:${env:AWS_ACCOUNT_ID}:signup-creation-queue
    - arn:aws:sqs:${env:AWS_REGION_CODE}:${env:AWS_ACCOUNT_ID}:signup-cleanup-queue
    - arn:aws:sqs:${env:AWS_REGION_CODE}:${env:AWS_ACCOUNT_ID}:create-project-queue
