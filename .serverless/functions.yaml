api:
  handler: src/server.handler
  events: ${file(./.serverless/events.yaml)}

signup:
  handler: src/sqs/workers/signup/create.handler
  events:
    - sqs:
        arn: !GetAtt SignupQueue.Arn
        batchSize: 5
        maximumRetryAttempts: 2

cleanup:
  handler: src/sqs/workers/signup/cleanup.handler
  events:
    - sqs:
        arn: !GetAtt CleanupQueue.Arn
        batchSize: 5
        maximumRetryAttempts: 2

createProject:
  handler: src/sqs/workers/project/create.handler
  events:
    - sqs:
        arn:
          Fn::GetAtt:
            - CreateProjectQueue
            - Arn

authorizer:
  handler: src/middleware/serverlessAuth.authorizeHandler