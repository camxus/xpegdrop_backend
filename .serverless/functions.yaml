api:
  handler: dist/server.handler
  events: ${file(./.serverless/events.yaml)}

signup:
  handler: dist/sqs/workers/signup/create.handler
  events:
    - sqs:
        arn: !GetAtt SignupQueue.Arn
        batchSize: 5
        maximumRetryAttempts: 2

cleanup:
  handler: dist/sqs/workers/signup/cleanup.handler
  events:
    - sqs:
        arn: !GetAtt CleanupQueue.Arn
        batchSize: 5
        maximumRetryAttempts: 2

createProject:
  handler: dist/sqs/workers/project/create.handler
  timeout: 60
  events:
    - sqs:
        arn:
          Fn::GetAtt:
            - CreateProjectQueue
            - Arn

addFiles:
  handler: dist/sqs/workers/project/addFiles.handler
  events:
    - sqs:
        arn: !GetAtt AddFilesQueue.Arn
        batchSize: 5
        maximumRetryAttempts: 2

addFilesCleanup:
  handler: dist/sqs/workers/project/addFilesCleanup.handler
  events:
    - sqs:
        arn: !GetAtt AddFilesCleanupQueue.Arn
        batchSize: 5
        maximumRetryAttempts: 2

authorizer:
  handler: dist/middleware/serverlessAuth.authorizeHandler
